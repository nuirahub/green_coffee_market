from logging import info


-- info
Oto zestawienie **50 profesjonalnych źródeł danych (5 kategorii po 10 serwisów)**, które pozwolą Ci na rzetelną weryfikację informacji (tzw. cross-checking) przy tworzeniu raportu o rynku zielonej kawy.

Lista zawiera zarówno źródła darmowe (publiczne), jak i specjalistyczne serwisy branżowe (często płatne lub wymagające rejestracji), z których korzystają analitycy rynkowi.

---

### Grupa 1: Makroekonomia, Podaż i Produkcja (Fundamenty)

*Tutaj sprawdzisz, ile kawy fizycznie jest na świecie, jakie są prognozy zbiorów i zapasy.*

1. **USDA Foreign Agricultural Service (FAS):** (USA) Absolutna podstawa. Raporty "Coffee: World Markets and Trade".
2. **ICO (International Coffee Organization):** (Wlk. Brytania) Oficjalne dane o eksporcie/imporcie i cenach wskaźnikowych.
3. **CONAB (Companhia Nacional de Abastecimento):** (Brazylia) Rządowe dane o zbiorach w Brazylii (największy gracz).
4. **CECAFE (Council of Coffee Exporters of Brazil):** (Brazylia) Miesięczne raporty o eksporcie z Brazylii (bardzo szczegółowe).
5. **FNC (Federación Nacional de Cafeteros):** (Kolumbia) Oficjalne dane o produkcji i eksporcie kawy kolumbijskiej.
6. **VICOFA (Vietnam Coffee Cocoa Association):** (Wietnam) Kluczowe źródło dla rynku Robusty.
7. **GCA (Green Coffee Association):** (USA) Raporty o zapasach kawy w magazynach portowych USA (kluczowy wskaźnik popytu).
8. **ECF (European Coffee Federation):** (Belgia/UE) Dane o imporcie kawy do Europy i zapasach w portach europejskich.
9. **UN Comtrade Database:** (Globalne) Międzynarodowa baza statystyk handlowych (kody HS 0901).
10. **FAOSTAT (Food and Agriculture Organization):** (Globalne) Długoterminowe dane o produkcji rolnej i powierzchni upraw.

---

### Grupa 2: Giełda, Ceny i Finanse

*Tutaj zweryfikujesz notowania bieżące, historię cen i kursy walut.*

1. **ICE (Intercontinental Exchange):** (USA/UK) Źródło danych dla kontraktów "Coffee C" (Arabika) i "Robusta Coffee".
2. **Barchart:** (USA) Świetne, darmowe wykresy kontraktów terminowych z analizą techniczną.
3. **TradingView:** (Globalne) Najlepsze narzędzie do wizualizacji cen i porównywania ich z innymi aktywami (np. ropą, walutami).
4. **Investing.com:** (Globalne) Szybki dostęp do notowań surowców, kalendarza ekonomicznego i newsów.
5. **Stooq.pl:** (Polska) Idealne do szybkiego sprawdzania kursów walut (USD/PLN) i surowców z polskiej perspektywy.
6. **Bloomberg Commodities:** (USA) Serwis newsowy i analityczny dla rynków surowcowych (wersja webowa).
7. **StoneX (dawniej INTL FCStone):** (Globalne) Profesjonalne analizy rynkowe brokera surowcowego (często publikują fragmenty raportów).
8. **Reuters Commodities:** (Globalne) Agencja prasowa z bardzo szybkim dostępem do newsów wpływających na ceny (np. przymrozki).
9. **Oanda:** (Globalne) Historyczne kursy walut do kalkulacji kosztów z przeszłości.
10. **NBP (Narodowy Bank Polski):** (Polska) Oficjalne tabele kursów średnich do rozliczeń celno-skarbowych.

---

### Grupa 3: Logistyka, Fracht i Łańcuch Dostaw

*Tutaj sprawdzisz koszty transportu i sytuację w portach.*

1. **Drewry (World Container Index):** Indeksy stawek frachtowych (np. Szanghaj-Rotterdam).
2. **Freightos (FBX):** Globalny indeks cen kontenerowych, pokazuje trendy cenowe dzień po dniu.
3. **The Loadstar:** Najlepszy branżowy serwis newsowy o logistyce morskiej i łańcuchu dostaw.
4. **MarineTraffic:** Śledzenie statków w czasie rzeczywistym (przydatne przy zatorach w portach).
5. **JOC (Journal of Commerce):** Analizy rynku kontenerowego i logistyki międzynarodowej.
6. **Hapag-Lloyd / Maersk Market Updates:** Oficjalne komunikaty armatorów o sytuacjach kryzysowych (np. Kanał Sueski).
7. **Container xChange:** Raporty o dostępności pustych kontenerów w różnych regionach świata.
8. **Splash247:** Newsy morskie, często szybsze niż media głównego nurtu.
9. **Xeneta:** Platforma benchmarkingowa stawek frachtowych (publikują darmowe raporty rynkowe).
10. **Baltic Exchange:** Indeksy stawek dla transportu masowego (dry bulk) – wskaźnik wyprzedzający dla handlu.

---

### Grupa 4: Regulacje, Certyfikaty i Zrównoważony Rozwój

*Tutaj zweryfikujesz wymogi prawne (EUDR) i standardy etyczne.*

1. **European Commission (Environment):** Oficjalne teksty i FAQ dotyczące rozporządzenia EUDR (wylesianie).
2. **EUR-Lex:** Bezpośredni dostęp do aktów prawnych Unii Europejskiej.
3. **Fairtrade International:** Raporty roczne, standardy cen minimalnych i premii Fairtrade.
4. **Rainforest Alliance:** Dane o certyfikowanych uprawach i standardy rolnictwa zrównoważonego.
5. **Global Coffee Platform (GCP):** Raporty o zrównoważonym rozwoju sektora kawowego (Collective Reporting).
6. **World Coffee Research (WCR):** Badania naukowe nad odmianami kawy i ich odpornością na zmiany klimatu.
7. **Enveritas:** Organizacja dostarczająca dane o weryfikacji zrównoważonego rozwoju (często alternatywa dla certyfikatów).
8. **4C Services:** Jeden z największych systemów certyfikacji kawy na świecie.
9. **SCA (Sustainability Center):** Centrum wiedzy Specialty Coffee Association o zrównoważonym rozwoju.
10. **International Trade Centre (ITC) - Sustainability Map:** Mapa standardów i certyfikatów w handlu międzynarodowym.

---

### Grupa 5: Trendy Konsumenckie i Analiza Rynku Kawy

*Tutaj sprawdzisz, co się pije, jak się pali i co jest modne.*

1. **World Coffee Portal (Allegra):** Najważniejsze raporty o rynku kawiarni w Europie (Project Café).
2. **Daily Coffee News (Roast Magazine):** Codzienne informacje o branży palarniczej i handlu zielonym ziarnem.
3. **Global Coffee Report:** Magazyn biznesowy dla liderów branży kawowej.
4. **STiR Coffee and Tea:** Międzynarodowy magazyn B2B o przemyśle kawowym i herbacianym.
5. **Perfect Daily Grind:** Źródło wiedzy o trendach specialty, metodach parzenia i obróbki ziarna.
6. **Mintel:** (Płatne/Fragmenty) Badania rynkowe dotyczące żywności i napojów (trendy konsumenckie).
7. **Euromonitor International:** (Płatne/Fragmenty) Makroekonomiczne analizy rynku napojów gorących.
8. **Coffee Intelligence:** Analizy biznesowe rynku kawy, fuzje i przejęcia.
9. **The Coffee Vine:** Europejski serwis śledzący najlepsze palarnie i subskrypcje kawowe (trendy produktowe).
10. **Forum Coffee Professionals (np. na LinkedIn/Discord):** Warto śledzić dyskusje praktyków, np. grupy "Coffee Roasters Forum" – tam weryfikujesz teorię z praktyką.

### Jak z tego korzystać (Strategia Triangulacji):

Aby mieć pewność co do danej informacji, zastosuj zasadę "Trzech Punktów":

1. Sprawdź **cenę** na giełdzie (Grupa 2).
2. Potwierdź **przyczynę** zmiany ceny w raporcie o produkcji (Grupa 1).
3. Zweryfikuj **możliwość dostawy** w serwisach logistycznych (Grupa 3).

Dopiero wtedy informacja nadaje się do profesjonalnego raportu biznesowego.



from cmd import PROMPT
import v02
--PROMPT
Jesteś automatem do generowania danych strukturalnych. Twoim zadaniem jest przygotowanie zestawienia 50 profesjonalnych źródeł danych dla rynku kawy (Green Coffee Market).

Wygeneruj dane w formacie CSV (Comma Separated Values).
Wymogi techniczne:
1. Użyj średnika (;) jako separatora (standard dla polskiego Excela).
2. Pierwszy wiersz musi zawierać nagłówki: Tytuł;Link;Opis;Grupa
3. NIE używaj bloków kodu (np. ```csv).
4. NIE dodawaj żadnego tekstu powitania, wyjaśnień ani zakończenia.
5. Zwróć TYLKO surowe dane.

Dane do wygenerowania (5 grup po 10 źródeł):
- Grupa 1: Makroekonomia i Podaż (np. USDA, ICO, CONAB)
- Grupa 2: Giełda i Ceny (np. ICE, Bloomberg, Stooq)
- Grupa 3: Logistyka i Fracht (np. Drewry, MarineTraffic)
- Grupa 4: Regulacje i Certyfikaty (np. EUDR, Fairtrade)
- Grupa 5: Trendy Konsumenckie (np. World Coffee Portal, Mintel)


--v1
import os

import google.generativeai as genai

# --- KONFIGURACJA ---
# Upewnij się, że masz ustawiony klucz API
# os.environ["GOOGLE_API_KEY"] = "TWÓJ_KLUCZ_API"
# genai.configure(api_key=os.environ["GOOGLE_API_KEY"])


def pobierz_zrodla_csv():
    # Wybór modelu (Flash jest szybszy i tańszy, Pro lepszy w rozumieniu instrukcji)
    model = genai.GenerativeModel("gemini-2.0-flash")

    # Zdefiniowany wyżej, restrykcyjny prompt
    prompt = """
    Jesteś automatem do generowania danych strukturalnych. Twoim zadaniem jest przygotowanie zestawienia 50 profesjonalnych źródeł danych dla rynku kawy.
    
    Wygeneruj dane w formacie CSV.
    Wymogi techniczne:
    1. Użyj średnika (;) jako separatora.
    2. Pierwszy wiersz to nagłówki: Tytuł;Link do serwisu;Krótki opis;Grupa
    3. NIE używaj formatowania Markdown (żadnych ```csv).
    4. NIE dodawaj wstępu ani zakończenia. Odpowiedź ma zawierać wyłącznie dane.
    
    Źródła mają pokrywać: Makroekonomię, Giełdę, Logistykę, Regulacje (EUDR) i Trendy.
    """

    print("Generowanie listy źródeł w toku...")

    try:
        response = model.generate_content(prompt)

        # Oczyszczanie odpowiedzi (na wypadek gdyby model jednak dodał ```csv)
        clean_csv = response.text.strip()
        if clean_csv.startswith("```csv"):
            clean_csv = clean_csv.replace("```csv", "").replace("```", "")
        elif clean_csv.startswith("```"):
            clean_csv = clean_csv.replace("```", "")

        return clean_csv.strip()

    except Exception as e:
        print(f"Wystąpił błąd: {e}")
        return None


if __name__ == "__main__":
    csv_content = pobierz_zrodla_csv()

    if csv_content:
        filename = "zrodla_kawy.csv"
        # Zapis z kodowaniem utf-8-sig (żeby Excel w Polsce poprawnie czytał polskie znaki ą, ę)
        with open(filename, "w", encoding="utf-8-sig") as f:
            f.write(csv_content)

        print(f"Sukces! Plik '{filename}' został utworzony.")
        print("Możesz go teraz otworzyć bezpośrednio w Excelu.")
    else:
        print("Nie udało się pobrać danych.")

--v02
import smtplib
from email import encoders
from email.mime.base import MIMEBase
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

from jinja2 import Template

# Przykładowe dane do Jinja (zakładam, że to już masz)
context = {
    "imie": "Szefie",
    "data_raportu": "2024-05-21",
    "podsumowanie": "Przesyłam w załączeniu wygenerowany wykaz źródeł.",
}

# Przykładowy szablon Jinja
html_template = """
<html>
  <body>
    <h2>Cześć {{ imie }},</h2>
    <p>Oto raport z dnia {{ data_raportu }}.</p>
    <p>{{ podsumowanie }}</p>
    <br>
    <p><i>Automat Raportowy</i></p>
  </body>
</html>
"""


def wyslij_maila_z_zalacznikiem(odbiorca, temat, plik_csv, context_jinja):
    # 1. Konfiguracja serwera SMTP (przykładowo Gmail, Outlook itp.)
    smtp_server = "smtp.gmail.com"  # Zmień na swój
    smtp_port = 587
    nadawca_email = "twoj_email@gmail.com"
    haslo_email = "twoje_haslo_aplikacji"  # Ważne: użyj hasła aplikacji, nie zwykłego!

    # 2. Tworzenie kontenera wiadomości (MIMEMultipart)
    msg = MIMEMultipart()
    msg["From"] = nadawca_email
    msg["To"] = odbiorca
    msg["Subject"] = temat

    # 3. Renderowanie szablonu Jinja
    template = Template(html_template)
    html_content = template.render(context_jinja)

    # 4. Dodanie treści HTML do wiadomości
    # "attach" to kluczowe słowo - doczepiamy treść do kontenera
    msg.attach(MIMEText(html_content, "html"))

    # 5. Logika dodawania ZAŁĄCZNIKA
    filename = plik_csv

    # Sprawdź, czy plik istnieje
    if os.path.exists(filename):
        with open(filename, "rb") as attachment:  # 'rb' = read binary
            # Tworzymy obiekt MIMEBase (aplikacja/octet-stream to uniwersalny typ dla plików)
            part = MIMEBase("application", "octet-stream")
            part.set_payload(attachment.read())

        # Kodujemy plik do Base64 (standard przesyłania plików w emailach)
        encoders.encode_base64(part)

        # Dodajemy nagłówek, żeby klient poczty wiedział, że to załącznik i jak się nazywa
        part.add_header(
            "Content-Disposition",
            f"attachment; filename= {filename}",
        )

        # Doczepiamy przetworzony załącznik do wiadomości głównej
        msg.attach(part)
        print(f"Załączono plik: {filename}")
    else:
        print(f"Błąd: Nie znaleziono pliku {filename}")
        return

    # 6. Wysyłka
    try:
        server = smtplib.SMTP(smtp_server, smtp_port)
        server.starttls()  # Szyfrowanie połączenia
        server.login(nadawca_email, haslo_email)
        server.send_message(msg)
        server.quit()
        print("E-mail został wysłany pomyślnie!")
    except Exception as e:
        print(f"Błąd podczas wysyłania: {e}")


# --- UŻYCIE ---
# Zakładając, że plik 'zrodla_kawy.csv' leży w tym samym folderze
if __name__ == "__main__":
    wyslij_maila_z_zalacznikiem(
        odbiorca="klient@firma.pl",
        temat="Raport Źródeł Kawy",
        plik_csv="zrodla_kawy.csv",
        context_jinja=context,
    )
